/*! imgin 2013-12-30 */
(function(){var a,b,c,d,e,f;e=function(a,b){return setTimeout(b,a)},c=function(){return console.log},f=function(a,b){var c;return c=new XMLHttpRequest,c.open("GET",a,!0),c.setRequestHeader("Authorization","Client-ID bc555e2b76aefbd"),c.onload=function(){var a;return a=JSON.parse(c.responseText),b(a)},c.send()},b=function(a,b){return f("https://api.imgur.com/3/image/"+a,function(a){return b(a.data.link)})},a=function(a,b){return f("https://api.imgur.com/3/album/"+a+"/images",function(a){var c;return console.log(a),b(function(){var b,d,e,f;for(e=a.data,f=[],b=0,d=e.length;d>b;b++)c=e[b],f.push(c.link);return f}())})},d={pos:{x:0,y:0},view:{x:0,y:0}},function(){var c,f,g,h,i,j,k,l;return c=document.getElementsByTagName("body")[0],f=document.createElement("div"),i=document.createElement("img"),j=null,l=null,f.className="imgin-box",f.style.display="none",f.appendChild(i),c.appendChild(f),k=function(a,b){return f.style.left=a+"px",f.style.top=b+"px"},g=function(a){var b,c;return a?(c=.95*document.documentElement.clientWidth,b=.95*document.documentElement.clientHeight,i.onload=function(){var e,g,h,j,l;return l=i.naturalWidth,e=i.naturalHeight,(l>c||e>b)&&(console.log("image is too big ("+l+", "+e+") for view ("+c+", "+b+")"),j=l/c,h=e/b,console.log("selecting scale ("+j+", "+h+")"),g=Math.max(j,h),i.width=Math.round(l/g),i.height=Math.round(e/g),console.log("new size ("+i.width+", "+i.height+")")),f.style.display="block",k(d.pos.x+5,d.pos.y),console.log("displaying ",a)},i.src="string"==typeof a?a:a[0]):(f.style.display="none",console.log("hiding"),j=null,void 0)},h=function(c,d){for(var e;c;){if(c===f)return;if("A"===c.nodeName&&c.href){if(c.href===j)return;if(j=c.href,console.log("checking "+c.href),c.href.match(/\.(jpg|jpeg|gif|png|bmp)$/gi))return d(c.href),void 0;if(e=c.href.match(/http:\/\/imgur\.com\/a\/(.*)/))return console.log("imgur album "+e[1]),a(e[1],d),void 0;if(e=c.href.match(/http:\/\/imgur\.com\/(.*)/))return b(e[1],d),void 0;c=c.parentElement}else c=c.parentElement}return d(null)},document.addEventListener("mousemove",function(a){var b;return l&&clearTimeout(l),b=a.target,d.pos.x=a.pageX,d.pos.y=a.pageY,d.view.x=a.screenX,d.view.y=a.screenY,l=e(100,function(){return h(b,function(a){return g(a)})})})}()}).call(this);